\section{src/libpocketsphinx/dict.h File Reference}
\label{dict_8h}\index{src/libpocketsphinx/dict.\-h@{src/libpocketsphinx/dict.\-h}}


Operations on dictionary.  


{\ttfamily \#include $<$sphinxbase/hash\-\_\-table.\-h$>$}\\*
{\ttfamily \#include \char`\"{}s3types.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bin\-\_\-mdef.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pocketsphinx\-\_\-export.\-h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct {\bf dictword\-\_\-t}
\begin{DoxyCompactList}\small\item\em a structure for one dictionary word. \end{DoxyCompactList}\item 
struct {\bf dict\-\_\-t}
\begin{DoxyCompactList}\small\item\em a structure for a dictionary. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries S3\-D\-I\-C\-T\-\_\-\-I\-N\-C\-\_\-\-S\-Z}~4096\label{dict_8h_a8d8a7f13ae4607c024a3e9f0c34ba2b9}

\item 
\#define {\bf dict\-\_\-size}(d)~((d)-\/$>$n\-\_\-word)\label{dict_8h_a361b948b42f9cfdf5c7fa9dfc8a71a94}

\begin{DoxyCompactList}\small\item\em Packaged macro access to dictionary members. \end{DoxyCompactList}\item 
\#define {\bfseries dict\-\_\-num\-\_\-fillers}(d)~(dict\-\_\-filler\-\_\-end(d) -\/ dict\-\_\-filler\-\_\-start(d))\label{dict_8h_a21147dad416a87bf085b86bc32a62810}

\item 
\#define {\bf dict\-\_\-num\-\_\-real\-\_\-words}(d)~({\bf dict\-\_\-size}(d) -\/ (dict\-\_\-filler\-\_\-end(d) -\/ dict\-\_\-filler\-\_\-start(d)) -\/ 2)
\begin{DoxyCompactList}\small\item\em Number of \char`\"{}real words\char`\"{} in the dictionary. \end{DoxyCompactList}\item 
\#define {\bfseries dict\-\_\-basewid}(d, w)~((d)-\/$>$word[w].basewid)\label{dict_8h_a5ad27f5fb02c9f5dd811e0d04aca9231}

\item 
\#define {\bfseries dict\-\_\-wordstr}(d, w)~((w) $<$ 0 ? N\-U\-L\-L \-: (d)-\/$>$word[w].word)\label{dict_8h_a960244692f448457dbea9498108fe2d9}

\item 
\#define {\bfseries dict\-\_\-basestr}(d, w)~((d)-\/$>$word[dict\-\_\-basewid(d,w)].word)\label{dict_8h_a84df59782b43012dafcaebc716cbd932}

\item 
\#define {\bfseries dict\-\_\-nextalt}(d, w)~((d)-\/$>$word[w].alt)\label{dict_8h_ad28133467ed803b4219ae1452bff929c}

\item 
\#define {\bfseries dict\-\_\-pronlen}(d, w)~((d)-\/$>$word[w].pronlen)\label{dict_8h_ab40570a0b06cdcbc9a22d9777936e780}

\item 
\#define {\bf dict\-\_\-pron}(d, w, p)~((d)-\/$>$word[w].ciphone[p])\label{dict_8h_a8785ab6264a5c6cf0b8da6bf79a46de4}

\begin{DoxyCompactList}\small\item\em The C\-I phones of the word w at position p. \end{DoxyCompactList}\item 
\#define {\bfseries dict\-\_\-filler\-\_\-start}(d)~((d)-\/$>$filler\-\_\-start)\label{dict_8h_aa6e902650918309eb90b83cbbed96401}

\item 
\#define {\bfseries dict\-\_\-filler\-\_\-end}(d)~((d)-\/$>$filler\-\_\-end)\label{dict_8h_a236a26fcd9e5464631c563a03e05c719}

\item 
\#define {\bfseries dict\-\_\-startwid}(d)~((d)-\/$>$startwid)\label{dict_8h_a56c28444a8e3ffeb71a3329df2509257}

\item 
\#define {\bfseries dict\-\_\-finishwid}(d)~((d)-\/$>$finishwid)\label{dict_8h_ab00b6ceb46292b3c10b571d5cc7eac1d}

\item 
\#define {\bfseries dict\-\_\-silwid}(d)~((d)-\/$>$silwid)\label{dict_8h_a3e35b701bf6eefd7c17436a45409b623}

\item 
\#define {\bfseries dict\-\_\-is\-\_\-single\-\_\-phone}(d, w)~((d)-\/$>$word[w].pronlen == 1)\label{dict_8h_addf34f870858c4dd751896113c6f62b4}

\item 
\#define {\bfseries dict\-\_\-first\-\_\-phone}(d, w)~((d)-\/$>$word[w].ciphone[0])\label{dict_8h_aac0e78a257dde5c082fe2053b19c7346}

\item 
\#define {\bfseries dict\-\_\-second\-\_\-phone}(d, w)~((d)-\/$>$word[w].ciphone[1])\label{dict_8h_a6504d5e7dcac8096894e1a8cea35b7db}

\item 
\#define {\bfseries dict\-\_\-second\-\_\-last\-\_\-phone}(d, w)~((d)-\/$>$word[w].ciphone[(d)-\/$>$word[w].pronlen -\/ 2])\label{dict_8h_a75ebbbca085999e695278cc3c02895ef}

\item 
\#define {\bfseries dict\-\_\-last\-\_\-phone}(d, w)~((d)-\/$>$word[w].ciphone[(d)-\/$>$word[w].pronlen -\/ 1])\label{dict_8h_a47f1f648ae9d6544ec067d2a327d1316}

\item 
\#define {\bfseries S3\-\_\-\-S\-T\-A\-R\-T\-\_\-\-W\-O\-R\-D}~\char`\"{}$<$s$>$\char`\"{}\label{dict_8h_a383b5d67202951a19989b0fca2e5462b}

\item 
\#define {\bfseries S3\-\_\-\-F\-I\-N\-I\-S\-H\-\_\-\-W\-O\-R\-D}~\char`\"{}$<$/s$>$\char`\"{}\label{dict_8h_a22c7450ba073a0d1e1a3a2a99304d5c8}

\item 
\#define {\bfseries S3\-\_\-\-S\-I\-L\-E\-N\-C\-E\-\_\-\-W\-O\-R\-D}~\char`\"{}$<$sil$>$\char`\"{}\label{dict_8h_afb3127621782f91be8536c2c95a20dd8}

\item 
\#define {\bfseries S3\-\_\-\-U\-N\-K\-N\-O\-W\-N\-\_\-\-W\-O\-R\-D}~\char`\"{}$<$U\-N\-K$>$\char`\"{}\label{dict_8h_a07d5343a9b10d6f6ea885c28c5d36a4b}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\bf dict\-\_\-t} $\ast$ {\bf dict\-\_\-init} (cmd\-\_\-ln\-\_\-t $\ast$config, {\bf bin\-\_\-mdef\-\_\-t} $\ast$mdef)
\begin{DoxyCompactList}\small\item\em Initialize a new dictionary. \end{DoxyCompactList}\item 
int {\bf dict\-\_\-write} ({\bf dict\-\_\-t} $\ast$dict, char const $\ast$filename, char const $\ast$format)\label{dict_8h_a4bfa8e3b7b9ff30165375d1c97bb04b8}

\begin{DoxyCompactList}\small\item\em Write dictionary to a file. \end{DoxyCompactList}\item 
P\-O\-C\-K\-E\-T\-S\-P\-H\-I\-N\-X\-\_\-\-E\-X\-P\-O\-R\-T s3wid\-\_\-t {\bf dict\-\_\-wordid} ({\bf dict\-\_\-t} $\ast$d, const char $\ast$word)
\begin{DoxyCompactList}\small\item\em Return word id for given word string if present. \end{DoxyCompactList}\item 
int {\bf dict\-\_\-filler\-\_\-word} ({\bf dict\-\_\-t} $\ast$d, s3wid\-\_\-t w)
\begin{DoxyCompactList}\small\item\em Return 1 if w is a filler word, 0 if not. \end{DoxyCompactList}\item 
P\-O\-C\-K\-E\-T\-S\-P\-H\-I\-N\-X\-\_\-\-E\-X\-P\-O\-R\-T int {\bf dict\-\_\-real\-\_\-word} ({\bf dict\-\_\-t} $\ast$d, s3wid\-\_\-t w)
\begin{DoxyCompactList}\small\item\em Test if w is a \char`\"{}real\char`\"{} word, i.\-e. \end{DoxyCompactList}\item 
s3wid\-\_\-t {\bf dict\-\_\-add\-\_\-word} ({\bf dict\-\_\-t} $\ast$d, char const $\ast$word, {\bf s3cipid\-\_\-t} const $\ast$p, int32 np)
\begin{DoxyCompactList}\small\item\em Add a word with the given ciphone pronunciation list to the dictionary. \end{DoxyCompactList}\item 
const char $\ast$ {\bf dict\-\_\-ciphone\-\_\-str} ({\bf dict\-\_\-t} $\ast$d, s3wid\-\_\-t wid, int32 pos)
\begin{DoxyCompactList}\small\item\em Return value\-: C\-I phone string for the given word, phone position. \end{DoxyCompactList}\item 
int32 {\bf dict\-\_\-word2basestr} (char $\ast$word)
\begin{DoxyCompactList}\small\item\em If the given word contains a trailing \char`\"{}(....)\char`\"{} (i.\-e., a Sphinx-\/\-I\-I style alternative pronunciation specification), strip that trailing portion from it. \end{DoxyCompactList}\item 
{\bf dict\-\_\-t} $\ast$ {\bf dict\-\_\-retain} ({\bf dict\-\_\-t} $\ast$d)\label{dict_8h_a0edf70be186e8940af9d21243083cb8b}

\begin{DoxyCompactList}\small\item\em Retain a pointer to an \doxyref{dict\-\_\-t}{p.}{structdict__t}. \end{DoxyCompactList}\item 
int {\bf dict\-\_\-free} ({\bf dict\-\_\-t} $\ast$d)\label{dict_8h_a51ee6c067decce8dbc182f95f7b33e91}

\begin{DoxyCompactList}\small\item\em Release a pointer to a dictionary. \end{DoxyCompactList}\item 
void {\bf dict\-\_\-report} ({\bf dict\-\_\-t} $\ast$d)
\begin{DoxyCompactList}\small\item\em Report a dictionary structure. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Operations on dictionary. 

Definition in file {\bf dict.\-h}.



\subsection{Macro Definition Documentation}
\index{dict.\-h@{dict.\-h}!dict\-\_\-num\-\_\-real\-\_\-words@{dict\-\_\-num\-\_\-real\-\_\-words}}
\index{dict\-\_\-num\-\_\-real\-\_\-words@{dict\-\_\-num\-\_\-real\-\_\-words}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-num\-\_\-real\-\_\-words}]{\setlength{\rightskip}{0pt plus 5cm}\#define dict\-\_\-num\-\_\-real\-\_\-words(
\begin{DoxyParamCaption}
\item[{}]{d}
\end{DoxyParamCaption}
)~({\bf dict\-\_\-size}(d) -\/ (dict\-\_\-filler\-\_\-end(d) -\/ dict\-\_\-filler\-\_\-start(d)) -\/ 2)}\label{dict_8h_a529d92f69f39e1f8c4a94e60a9509201}


Number of \char`\"{}real words\char`\"{} in the dictionary. 

This is the number of words that are not fillers, $<$s$>$, or $<$/s$>$. 

Definition at line 158 of file dict.\-h.



\subsection{Function Documentation}
\index{dict.\-h@{dict.\-h}!dict\-\_\-add\-\_\-word@{dict\-\_\-add\-\_\-word}}
\index{dict\-\_\-add\-\_\-word@{dict\-\_\-add\-\_\-word}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-add\-\_\-word}]{\setlength{\rightskip}{0pt plus 5cm}s3wid\-\_\-t dict\-\_\-add\-\_\-word (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d, }
\item[{char const $\ast$}]{word, }
\item[{{\bf s3cipid\-\_\-t} const $\ast$}]{p, }
\item[{int32}]{np}
\end{DoxyParamCaption}
)}\label{dict_8h_a24888ac8e24259e553c43c4655b38432}


Add a word with the given ciphone pronunciation list to the dictionary. 

Return value\-: Result word id if successful, B\-A\-D\-\_\-\-S3\-W\-I\-D otherwise 
\begin{DoxyParams}{Parameters}
{\em d} & The dictionary structure. \\
\hline
{\em word} & The word. \\
\hline
{\em p} & The pronunciation. \\
\hline
{\em np} & Number of phones. \\
\hline
\end{DoxyParams}


Definition at line 80 of file dict.\-c.



References dictword\-\_\-t\-::alt, B\-A\-D\-\_\-\-S3\-W\-I\-D, dictword\-\_\-t\-::basewid, dictword\-\_\-t\-::ciphone, dict\-\_\-word2basestr(), dict\-\_\-t\-::ht, dict\-\_\-t\-::max\-\_\-words, dict\-\_\-t\-::n\-\_\-word, dictword\-\_\-t\-::pronlen, dictword\-\_\-t\-::word, and dict\-\_\-t\-::word.



Referenced by dict\-\_\-init(), ps\-\_\-add\-\_\-word(), and ps\-\_\-lattice\-\_\-read().

\index{dict.\-h@{dict.\-h}!dict\-\_\-ciphone\-\_\-str@{dict\-\_\-ciphone\-\_\-str}}
\index{dict\-\_\-ciphone\-\_\-str@{dict\-\_\-ciphone\-\_\-str}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-ciphone\-\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ dict\-\_\-ciphone\-\_\-str (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d, }
\item[{s3wid\-\_\-t}]{wid, }
\item[{int32}]{pos}
\end{DoxyParamCaption}
)}\label{dict_8h_a8587d077f5303554df0e26a181bfb0bf}


Return value\-: C\-I phone string for the given word, phone position. 


\begin{DoxyParams}{Parameters}
{\em d} & In\-: Dictionary to look up \\
\hline
{\em wid} & In\-: Component word being looked up \\
\hline
{\em pos} & In\-: Pronunciation phone position \\
\hline
\end{DoxyParams}


Definition at line 69 of file dict.\-c.



References bin\-\_\-mdef\-\_\-ciphone\-\_\-str(), dictword\-\_\-t\-::ciphone, dict\-\_\-t\-::mdef, and dict\-\_\-t\-::word.



Referenced by dict\-\_\-write(), and ps\-\_\-lookup\-\_\-word().

\index{dict.\-h@{dict.\-h}!dict\-\_\-filler\-\_\-word@{dict\-\_\-filler\-\_\-word}}
\index{dict\-\_\-filler\-\_\-word@{dict\-\_\-filler\-\_\-word}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-filler\-\_\-word}]{\setlength{\rightskip}{0pt plus 5cm}int dict\-\_\-filler\-\_\-word (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d, }
\item[{s3wid\-\_\-t}]{w}
\end{DoxyParamCaption}
)}\label{dict_8h_aa5cade4dc6464c620718b86344540aff}


Return 1 if w is a filler word, 0 if not. 

A filler word is one that was read in from the filler dictionary; however, sentence S\-T\-A\-R\-T and F\-I\-N\-I\-S\-H words are not filler words. 
\begin{DoxyParams}{Parameters}
{\em d} & The dictionary structure \\
\hline
{\em w} & The word I\-D \\
\hline
\end{DoxyParams}


Definition at line 413 of file dict.\-c.



References dict\-\_\-t\-::filler\-\_\-start, dict\-\_\-t\-::finishwid, and dict\-\_\-t\-::startwid.



Referenced by dict\-\_\-init(), ngram\-\_\-search\-\_\-lattice(), ps\-\_\-lattice\-\_\-bestpath(), ps\-\_\-lattice\-\_\-penalize\-\_\-fillers(), ps\-\_\-lattice\-\_\-posterior(), ps\-\_\-lattice\-\_\-read(), and ps\-\_\-lattice\-\_\-write\-\_\-htk().

\index{dict.\-h@{dict.\-h}!dict\-\_\-init@{dict\-\_\-init}}
\index{dict\-\_\-init@{dict\-\_\-init}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dict\-\_\-t}$\ast$ dict\-\_\-init (
\begin{DoxyParamCaption}
\item[{cmd\-\_\-ln\-\_\-t $\ast$}]{config, }
\item[{{\bf bin\-\_\-mdef\-\_\-t} $\ast$}]{mdef}
\end{DoxyParamCaption}
)}\label{dict_8h_a05d8dac3e5fe5399ccb8bf7776e203e2}


Initialize a new dictionary. 

If config and mdef are supplied, then the dictionary will be read from the files specified by the -\/dict and -\/fdict options in config, with case sensitivity determined by the -\/dictcase option.

Otherwise an empty case-\/sensitive dictionary will be created.

Return ptr to \doxyref{dict\-\_\-t}{p.}{structdict__t} if successful, N\-U\-L\-L otherwise. 
\begin{DoxyParams}{Parameters}
{\em config} & Configuration (-\/dict, -\/fdict, -\/dictcase) or N\-U\-L\-L \\
\hline
{\em mdef} & For looking up C\-I phone I\-Ds (or N\-U\-L\-L) \\
\hline
\end{DoxyParams}


Definition at line 252 of file dict.\-c.



References B\-A\-D\-\_\-\-S3\-W\-I\-D, bin\-\_\-mdef\-\_\-retain(), dict\-\_\-add\-\_\-word(), dict\-\_\-filler\-\_\-word(), dict\-\_\-free(), dict\-\_\-wordid(), dict\-\_\-t\-::filler\-\_\-end, dict\-\_\-t\-::filler\-\_\-start, dict\-\_\-t\-::finishwid, dict\-\_\-t\-::ht, dict\-\_\-t\-::max\-\_\-words, dict\-\_\-t\-::mdef, dict\-\_\-t\-::n\-\_\-word, dict\-\_\-t\-::silwid, dict\-\_\-t\-::startwid, and dict\-\_\-t\-::word.



Referenced by ps\-\_\-lattice\-\_\-read(), ps\-\_\-load\-\_\-dict(), and ps\-\_\-reinit().

\index{dict.\-h@{dict.\-h}!dict\-\_\-real\-\_\-word@{dict\-\_\-real\-\_\-word}}
\index{dict\-\_\-real\-\_\-word@{dict\-\_\-real\-\_\-word}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-real\-\_\-word}]{\setlength{\rightskip}{0pt plus 5cm}P\-O\-C\-K\-E\-T\-S\-P\-H\-I\-N\-X\-\_\-\-E\-X\-P\-O\-R\-T int dict\-\_\-real\-\_\-word (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d, }
\item[{s3wid\-\_\-t}]{w}
\end{DoxyParamCaption}
)}\label{dict_8h_ad2eba4ca92dd1a3721608e003d95d8c1}


Test if w is a \char`\"{}real\char`\"{} word, i.\-e. 

neither a filler word nor S\-T\-A\-R\-T/\-F\-I\-N\-I\-S\-H. 
\begin{DoxyParams}{Parameters}
{\em d} & The dictionary structure \\
\hline
{\em w} & The word I\-D \\
\hline
\end{DoxyParams}


Definition at line 427 of file dict.\-c.



References dict\-\_\-t\-::filler\-\_\-start, dict\-\_\-t\-::finishwid, and dict\-\_\-t\-::startwid.



Referenced by dict\-\_\-write(), ngram\-\_\-search\-\_\-bp\-\_\-hyp(), ps\-\_\-astar\-\_\-hyp(), and ps\-\_\-lattice\-\_\-hyp().

\index{dict.\-h@{dict.\-h}!dict\-\_\-report@{dict\-\_\-report}}
\index{dict\-\_\-report@{dict\-\_\-report}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-report}]{\setlength{\rightskip}{0pt plus 5cm}void dict\-\_\-report (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d}
\end{DoxyParamCaption}
)}\label{dict_8h_a41cca433a75fd2663bee115296639666}


Report a dictionary structure. 


\begin{DoxyParams}{Parameters}
{\em d} & A dictionary structure \\
\hline
\end{DoxyParams}


Definition at line 499 of file dict.\-c.



References dict\-\_\-t\-::max\-\_\-words, and dict\-\_\-t\-::n\-\_\-word.

\index{dict.\-h@{dict.\-h}!dict\-\_\-word2basestr@{dict\-\_\-word2basestr}}
\index{dict\-\_\-word2basestr@{dict\-\_\-word2basestr}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-word2basestr}]{\setlength{\rightskip}{0pt plus 5cm}int32 dict\-\_\-word2basestr (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{word}
\end{DoxyParamCaption}
)}\label{dict_8h_a3a128531ae9c077be9882119ed05fe3a}


If the given word contains a trailing \char`\"{}(....)\char`\"{} (i.\-e., a Sphinx-\/\-I\-I style alternative pronunciation specification), strip that trailing portion from it. 

Note that the given string is modified. Return value\-: If string was modified, the character position at which the original string was truncated; otherwise -\/1. 

Definition at line 442 of file dict.\-c.



Referenced by dict\-\_\-add\-\_\-word(), and ps\-\_\-lattice\-\_\-read().

\index{dict.\-h@{dict.\-h}!dict\-\_\-wordid@{dict\-\_\-wordid}}
\index{dict\-\_\-wordid@{dict\-\_\-wordid}!dict.h@{dict.\-h}}
\subsubsection[{dict\-\_\-wordid}]{\setlength{\rightskip}{0pt plus 5cm}P\-O\-C\-K\-E\-T\-S\-P\-H\-I\-N\-X\-\_\-\-E\-X\-P\-O\-R\-T s3wid\-\_\-t dict\-\_\-wordid (
\begin{DoxyParamCaption}
\item[{{\bf dict\-\_\-t} $\ast$}]{d, }
\item[{const char $\ast$}]{word}
\end{DoxyParamCaption}
)}\label{dict_8h_ad3729eb1a02a9a321e17933f7e90c80e}


Return word id for given word string if present. 

Otherwise return B\-A\-D\-\_\-\-S3\-W\-I\-D 

Definition at line 399 of file dict.\-c.



References B\-A\-D\-\_\-\-S3\-W\-I\-D, and dict\-\_\-t\-::ht.



Referenced by dict\-\_\-init(), ps\-\_\-lattice\-\_\-read(), and ps\-\_\-lookup\-\_\-word().

