\section{include/sphinxbase/err.h File Reference}
\label{err_8h}\index{include/sphinxbase/err.\-h@{include/sphinxbase/err.\-h}}


Implementation of logging routines.  


{\ttfamily \#include $<$stdarg.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$sphinxbase/sphinxbase\-\_\-export.\-h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries E\-\_\-\-S\-Y\-S\-C\-A\-L\-L}(stmt,...)~if (stmt) {\bf E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M}(\-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-);\label{err_8h_a0e884a86577f53ae267ba646fe59da0d}

\item 
\#define {\bfseries F\-I\-L\-E\-L\-I\-N\-E}~\-\_\-\-\_\-\-F\-I\-L\-E\-\_\-\-\_\- , \-\_\-\-\_\-\-L\-I\-N\-E\-\_\-\-\_\-\label{err_8h_af785434ca409c25676442575cd2495e6}

\item 
\#define {\bf E\-\_\-\-F\-A\-T\-A\-L}(...)
\begin{DoxyCompactList}\small\item\em Exit with non-\/zero status after error message. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M}(...)
\begin{DoxyCompactList}\small\item\em Print error text; Call perror(\char`\"{}\char`\"{}); exit(errno);. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-Y\-S\-T\-E\-M}(...)~err\-\_\-msg\-\_\-system(E\-R\-R\-\_\-\-E\-R\-R\-O\-R, F\-I\-L\-E\-L\-I\-N\-E, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_add0768056bee50c260c5623b4edd4038}

\begin{DoxyCompactList}\small\item\em Print error text; Call perror(\char`\"{}\char`\"{});. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-E\-R\-R\-O\-R}(...)~err\-\_\-msg(E\-R\-R\-\_\-\-E\-R\-R\-O\-R, F\-I\-L\-E\-L\-I\-N\-E, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_a87a0a12135a290cf16d06b63fcfa0ccf}

\begin{DoxyCompactList}\small\item\em Print error message to error log. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-W\-A\-R\-N}(...)~err\-\_\-msg(E\-R\-R\-\_\-\-W\-A\-R\-N, F\-I\-L\-E\-L\-I\-N\-E, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_aed4c99044fd3e70b7b33a0298a2279b4}

\begin{DoxyCompactList}\small\item\em Print warning message to error log. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-I\-N\-F\-O}(...)~err\-\_\-msg(E\-R\-R\-\_\-\-I\-N\-F\-O, F\-I\-L\-E\-L\-I\-N\-E, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_a92dbeb77b8e1facc7b15abab6ad19b73}

\begin{DoxyCompactList}\small\item\em Print logging information to standard error stream. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-I\-N\-F\-O\-C\-O\-N\-T}(...)~err\-\_\-msg(E\-R\-R\-\_\-\-I\-N\-F\-O\-C\-O\-N\-T, N\-U\-L\-L, 0, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_aaf6601c7c08a803c55f2d55fcd8d5759}

\begin{DoxyCompactList}\small\item\em Continue printing the information to standard error stream. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-I\-N\-F\-O\-\_\-\-N\-O\-F\-N}(...)~err\-\_\-msg(E\-R\-R\-\_\-\-I\-N\-F\-O, N\-U\-L\-L, 0, \-\_\-\-\_\-\-V\-A\-\_\-\-A\-R\-G\-S\-\_\-\-\_\-)\label{err_8h_abe6c68e16406b5f7aee0ec70e1f7d7f1}

\begin{DoxyCompactList}\small\item\em Print logging information without filename. \end{DoxyCompactList}\item 
\#define {\bf E\-\_\-\-D\-E\-B\-U\-G}(level, x)
\begin{DoxyCompactList}\small\item\em Print debugging information to standard error stream. \end{DoxyCompactList}\item 
\#define {\bfseries E\-\_\-\-D\-E\-B\-U\-G\-C\-O\-N\-T}(level, x)\label{err_8h_a7e8c4b068434a0424751fc2d2c457807}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef enum err\-\_\-e {\bfseries err\-\_\-lvl\-\_\-t}\label{err_8h_a57f70bbe592468358996a51ab70f5ee6}

\item 
typedef void($\ast$ {\bfseries err\-\_\-cb\-\_\-f} )(void $\ast$user\-\_\-data, err\-\_\-lvl\-\_\-t, const char $\ast$,...)\label{err_8h_acb072ebf0dc99785612ca404091c600f}

\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries err\-\_\-e} \{ \\*
{\bfseries E\-R\-R\-\_\-\-D\-E\-B\-U\-G}, 
{\bfseries E\-R\-R\-\_\-\-I\-N\-F\-O}, 
{\bfseries E\-R\-R\-\_\-\-I\-N\-F\-O\-C\-O\-N\-T}, 
{\bfseries E\-R\-R\-\_\-\-W\-A\-R\-N}, 
\\*
{\bfseries E\-R\-R\-\_\-\-E\-R\-R\-O\-R}, 
{\bfseries E\-R\-R\-\_\-\-F\-A\-T\-A\-L}, 
{\bfseries E\-R\-R\-\_\-\-M\-A\-X}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void {\bfseries err\-\_\-msg} (err\-\_\-lvl\-\_\-t lvl, const char $\ast$path, long ln, const char $\ast$fmt,...)\label{err_8h_a560638ee94fca8ffa65c033614fd4054}

\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void {\bfseries err\-\_\-msg\-\_\-system} (err\-\_\-lvl\-\_\-t lvl, const char $\ast$path, long ln, const char $\ast$fmt,...)\label{err_8h_a6f843bd6298fdc072f15a708e48ab246}

\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void {\bfseries err\-\_\-logfp\-\_\-cb} (void $\ast$user\-\_\-data, err\-\_\-lvl\-\_\-t level, const char $\ast$fmt,...)\label{err_8h_a3e25c4aaad723deaeccee35c9a14871a}

\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void {\bf err\-\_\-set\-\_\-callback} (err\-\_\-cb\-\_\-f callback, void $\ast$user\-\_\-data)
\begin{DoxyCompactList}\small\item\em Sets function to output error messages. \end{DoxyCompactList}\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void {\bf err\-\_\-set\-\_\-logfp} (F\-I\-L\-E $\ast$stream)
\begin{DoxyCompactList}\small\item\em Direct all logging to a given filehandle if default logfp callback is set. \end{DoxyCompactList}\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T F\-I\-L\-E $\ast$ {\bf err\-\_\-get\-\_\-logfp} (void)
\begin{DoxyCompactList}\small\item\em Get the current logging filehandle. \end{DoxyCompactList}\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int {\bf err\-\_\-set\-\_\-logfile} (const char $\ast$path)
\begin{DoxyCompactList}\small\item\em Append all log messages to a given file. \end{DoxyCompactList}\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int {\bf err\-\_\-set\-\_\-debug\-\_\-level} (int level)
\begin{DoxyCompactList}\small\item\em Set debugging verbosity level. \end{DoxyCompactList}\item 
S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int {\bf err\-\_\-get\-\_\-debug\-\_\-level} (void)
\begin{DoxyCompactList}\small\item\em Get debugging verbosity level. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation of logging routines. Logging, warning, debug and error message output funtionality is provided in this file. Sphinxbase defines several level of logging messages -\/ I\-N\-F\-O, W\-A\-R\-N\-I\-N\-G, E\-R\-R\-O\-R, F\-A\-T\-A\-L. By default output goes to standard error output.

Logging is implemented through macros. They take same arguments as printf\-: format string and values. By default source file name and source line are prepended to the message. Log output could be redirected to any file using \doxyref{err\-\_\-set\-\_\-logfp()}{p.}{err_8h_a9200c98c02f9fb424ea35eaa14a437e8} and \doxyref{err\-\_\-set\-\_\-logfile()}{p.}{err_8h_a1ccfa2c3d46f765dac7066c417b5e926} functions. To disable logging in your application, call err\-\_\-set\-\_\-logfp(\-N\-U\-L\-L).

It's possible to log multiline info messages, to do that you need to start message with E\-\_\-\-I\-N\-F\-O and output other lines with E\-\_\-\-I\-N\-F\-O\-C\-O\-N\-T. 

Definition in file {\bf err.\-h}.



\subsection{Macro Definition Documentation}
\index{err.\-h@{err.\-h}!E\-\_\-\-D\-E\-B\-U\-G@{E\-\_\-\-D\-E\-B\-U\-G}}
\index{E\-\_\-\-D\-E\-B\-U\-G@{E\-\_\-\-D\-E\-B\-U\-G}!err.h@{err.\-h}}
\subsubsection[{E\-\_\-\-D\-E\-B\-U\-G}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-\_\-\-D\-E\-B\-U\-G(
\begin{DoxyParamCaption}
\item[{}]{level, }
\item[{}]{x}
\end{DoxyParamCaption}
)}\label{err_8h_af46f94d0e21f22f1153f8f1cd9a372d6}


Print debugging information to standard error stream. 

This will only print a message if\-:
\begin{DoxyEnumerate}
\item Debugging is enabled at compile time
\item The debug level is greater than or equal to {\itshape level} 
\end{DoxyEnumerate}

Note that for portability reasons the format and arguments must be enclosed in an extra set of parentheses. 

Definition at line 144 of file err.\-h.

\index{err.\-h@{err.\-h}!E\-\_\-\-F\-A\-T\-A\-L@{E\-\_\-\-F\-A\-T\-A\-L}}
\index{E\-\_\-\-F\-A\-T\-A\-L@{E\-\_\-\-F\-A\-T\-A\-L}!err.h@{err.\-h}}
\subsubsection[{E\-\_\-\-F\-A\-T\-A\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-\_\-\-F\-A\-T\-A\-L(
\begin{DoxyParamCaption}
\item[{}]{...}
\end{DoxyParamCaption}
)}\label{err_8h_abaacffc3c0f14e4dd180b1e38c62c5a0}
{\bfseries Value\-:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                                           \(\backslash\)
        err\_msg(ERR\_FATAL, FILELINE, \_\_VA\_ARGS\_\_); \(\backslash\)
        exit(EXIT\_FAILURE);                        \(\backslash\)
    \} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Exit with non-\/zero status after error message. 



Definition at line 81 of file err.\-h.



Referenced by \-\_\-\-\_\-ckd\-\_\-calloc\-\_\-4d\-\_\-\-\_\-(), agc\-\_\-type\-\_\-from\-\_\-str(), bio\-\_\-fread\-\_\-1d(), bio\-\_\-verify\-\_\-chksum(), cmn\-\_\-prior(), cmn\-\_\-type\-\_\-from\-\_\-str(), determinant(), feat\-\_\-init(), feat\-\_\-read\-\_\-lda(), fopen\-\_\-comp(), invert(), parse\-\_\-subvecs(), and solve().

\index{err.\-h@{err.\-h}!E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M@{E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M}}
\index{E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M@{E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M}!err.h@{err.\-h}}
\subsubsection[{E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-\_\-\-F\-A\-T\-A\-L\-\_\-\-S\-Y\-S\-T\-E\-M(
\begin{DoxyParamCaption}
\item[{}]{...}
\end{DoxyParamCaption}
)}\label{err_8h_acc9aaeb2e0eb21f964913c14403d6795}
{\bfseries Value\-:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                                                                     \(\backslash\)
        err\_msg\_system(ERR\_FATAL, FILELINE, \_\_VA\_ARGS\_\_);                    \(\backslash\)
        exit(EXIT\_FAILURE);                                                  \(\backslash\)
    \} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Print error text; Call perror(\char`\"{}\char`\"{}); exit(errno);. 



Definition at line 90 of file err.\-h.



Referenced by bio\-\_\-read\-\_\-wavfile().



\subsection{Function Documentation}
\index{err.\-h@{err.\-h}!err\-\_\-get\-\_\-debug\-\_\-level@{err\-\_\-get\-\_\-debug\-\_\-level}}
\index{err\-\_\-get\-\_\-debug\-\_\-level@{err\-\_\-get\-\_\-debug\-\_\-level}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-get\-\_\-debug\-\_\-level}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int err\-\_\-get\-\_\-debug\-\_\-level (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{err_8h_a1500dc011016aa15244d0d7f2fe66a7e}


Get debugging verbosity level. 

Note that debugging messages are only enabled when compiled with -\/\-D\-D\-E\-B\-U\-G. 

Definition at line 287 of file err.\-c.

\index{err.\-h@{err.\-h}!err\-\_\-get\-\_\-logfp@{err\-\_\-get\-\_\-logfp}}
\index{err\-\_\-get\-\_\-logfp@{err\-\_\-get\-\_\-logfp}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-get\-\_\-logfp}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T F\-I\-L\-E$\ast$ err\-\_\-get\-\_\-logfp (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{err_8h_a9707012f263e46ea66e93349313ddbe6}


Get the current logging filehandle. 

\begin{DoxyReturn}{Returns}
Current logging filehandle, N\-U\-L\-L if logging is disabled. Initially it returns stderr 
\end{DoxyReturn}


Definition at line 268 of file err.\-c.



Referenced by cmd\-\_\-ln\-\_\-parse\-\_\-r(), and err\-\_\-set\-\_\-logfile().

\index{err.\-h@{err.\-h}!err\-\_\-set\-\_\-callback@{err\-\_\-set\-\_\-callback}}
\index{err\-\_\-set\-\_\-callback@{err\-\_\-set\-\_\-callback}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-set\-\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void err\-\_\-set\-\_\-callback (
\begin{DoxyParamCaption}
\item[{err\-\_\-cb\-\_\-f}]{callback, }
\item[{void $\ast$}]{user\-\_\-data}
\end{DoxyParamCaption}
)}\label{err_8h_abb253e337ff3774f3b089bbbbb2195f9}


Sets function to output error messages. 

Use it to redirect the logging to your application. By default the handler which dumps messages to stderr is set.


\begin{DoxyParams}{Parameters}
{\em -\/} & callback to pass messages too. \\
\hline
\end{DoxyParams}


Definition at line 293 of file err.\-c.

\index{err.\-h@{err.\-h}!err\-\_\-set\-\_\-debug\-\_\-level@{err\-\_\-set\-\_\-debug\-\_\-level}}
\index{err\-\_\-set\-\_\-debug\-\_\-level@{err\-\_\-set\-\_\-debug\-\_\-level}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-set\-\_\-debug\-\_\-level}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int err\-\_\-set\-\_\-debug\-\_\-level (
\begin{DoxyParamCaption}
\item[{int}]{level}
\end{DoxyParamCaption}
)}\label{err_8h_ab77fa009824260d9f103308272dc89b8}


Set debugging verbosity level. 

Note that debugging messages are only enabled when compiled with -\/\-D\-D\-E\-B\-U\-G.


\begin{DoxyParams}{Parameters}
{\em level} & Verbosity level to set, or 0 to disable debug messages. \\
\hline
\end{DoxyParams}


Definition at line 279 of file err.\-c.

\index{err.\-h@{err.\-h}!err\-\_\-set\-\_\-logfile@{err\-\_\-set\-\_\-logfile}}
\index{err\-\_\-set\-\_\-logfile@{err\-\_\-set\-\_\-logfile}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-set\-\_\-logfile}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T int err\-\_\-set\-\_\-logfile (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path}
\end{DoxyParamCaption}
)}\label{err_8h_a1ccfa2c3d46f765dac7066c417b5e926}


Append all log messages to a given file. 

Previous logging filehandle is closed (unless it was stdout or stderr).


\begin{DoxyParams}{Parameters}
{\em file} & File path to send log messages to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for success, $<$0 for failure (e.\-g. if file does not exist) 
\end{DoxyReturn}


Definition at line 241 of file err.\-c.



References err\-\_\-get\-\_\-logfp(), and err\-\_\-set\-\_\-logfp().

\index{err.\-h@{err.\-h}!err\-\_\-set\-\_\-logfp@{err\-\_\-set\-\_\-logfp}}
\index{err\-\_\-set\-\_\-logfp@{err\-\_\-set\-\_\-logfp}!err.h@{err.\-h}}
\subsubsection[{err\-\_\-set\-\_\-logfp}]{\setlength{\rightskip}{0pt plus 5cm}S\-P\-H\-I\-N\-X\-B\-A\-S\-E\-\_\-\-E\-X\-P\-O\-R\-T void err\-\_\-set\-\_\-logfp (
\begin{DoxyParamCaption}
\item[{F\-I\-L\-E $\ast$}]{stream}
\end{DoxyParamCaption}
)}\label{err_8h_a9200c98c02f9fb424ea35eaa14a437e8}


Direct all logging to a given filehandle if default logfp callback is set. 


\begin{DoxyParams}{Parameters}
{\em logfp} & Filehandle to send log messages to, or N\-U\-L\-L to disable logging. \\
\hline
\end{DoxyParams}


Definition at line 255 of file err.\-c.



Referenced by err\-\_\-set\-\_\-logfile().

