<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SphinxBase: src/libsphinxbase/util/hash_table.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SphinxBase
   &#160;<span id="projectnumber">5prealpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hash__table_8c_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">hash_table.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* -*- c-basic-offset: 4; indent-tabs-mode: nil -*- */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* ====================================================================</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 1999-2004 Carnegie Mellon University.  All rights</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * are met:</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer. </span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *    the documentation and/or other materials provided with the</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    distribution.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * This work was supported in part by funding from the Defense Advanced </span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Research Projects Agency and the National Science Foundation of the </span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * United States of America, and the CMU Sphinx Speech Consortium.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY CARNEGIE MELLON UNIVERSITY ``AS IS&#39;&#39; AND </span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, </span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL CARNEGIE MELLON UNIVERSITY</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * NOR ITS EMPLOYEES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT </span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, </span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY </span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT </span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE </span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * ====================================================================</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * hash.c -- Hash table module.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * **********************************************</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * CMU ARPA Speech Project</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * Copyright (c) 1999 Carnegie Mellon University.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * **********************************************</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * HISTORY</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * $Log: hash.c,v $</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * Revision 1.5  2005/06/22 03:04:01  arthchan2003</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> * 1, Implemented hash_delete and hash_display, 2, Fixed doxygen documentation, 3, Added  keyword.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> * Revision 1.9  2005/05/25 06:17:53  archan</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> * Delete the test code in cmd_ln.c and fixed platform specific code of hash.c</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> * Revision 1.8  2005/05/24 01:10:54  archan</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * Fix a bug when the value only appear in the hash but there is no chain.   Also make sure that prev was initialized to NULL. All success cases were tested, but not tested with the deletion is tested.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> * Revision 1.6  2005/05/24 00:00:45  archan</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> * Added basic functionalities to hash_t: 1, display and 2, delete a key from a hash. \n</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> * Revision 1.5  2005/05/11 07:01:38  archan</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * Added comments on the usage of the current implementation of hash tables.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * Revision 1.4  2005/05/03 04:09:11  archan</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * Implemented the heart of word copy search. For every ci-phone, every word end, a tree will be allocated to preserve its pathscore.  This is different from 3.5 or below, only the best score for a particular ci-phone, regardless of the word-ends will be preserved at every frame.  The graph propagation will not collect unused word tree at this point. srch_WST_propagate_wd_lv2 is also as the most stupid in the century.  But well, after all, everything needs a start.  I will then really get the results from the search and see how it looks.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> * Revision 1.3  2005/03/30 01:22:48  archan</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * Fixed mistakes in last updates. Add</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * 05-May-1999  M K Ravishankar (rkm@cs.cmu.edu) at Carnegie Mellon</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *              Removed hash_key2hash().  Added hash_enter_bkey() and hash_lookup_bkey(),</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *              and len attribute to hash_entry_t.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> * 30-Apr-1999  M K Ravishankar (rkm@cs.cmu.edu) at Carnegie Mellon</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *              Added hash_key2hash().</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * 18-Jun-97    M K Ravishankar (rkm@cs.cmu.edu) at Carnegie Mellon</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> *              Included case sensitive/insensitive option.  Removed local, static</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> *              maintenance of all hash tables.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * 31-Jul-95    M K Ravishankar (rkm@cs.cmu.edu) at Carnegie Mellon</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> *              Created.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#pragma warning (disable: 4018)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hash__table_8h.html">sphinxbase/hash_table.h</a>&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="err_8h.html">sphinxbase/err.h</a>&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ckd__alloc_8h.html">sphinxbase/ckd_alloc.h</a>&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="case_8h.html">sphinxbase/case.h</a>&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;prime_sieve(int32 max)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">char</span> *notprime;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    int32 p, pp;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    notprime = (<span class="keywordtype">char</span> *) <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(max + 1, 1);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    p = 2;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        printf(<span class="stringliteral">&quot;%d\n&quot;</span>, p);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span> (pp = p + p; pp &lt;= max; pp += p)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            notprime[pp] = 1;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">for</span> (++p; (p &lt;= max) &amp;&amp; notprime[p]; p++);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (p &gt; max)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * HACK!!  Initial hash table size is restricted by this set of primes.  (Of course,</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * collision resolution by chaining will accommodate more entries indefinitely, but</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * efficiency will drop.)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">const</span> int32 prime[] = {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    101, 211, 307, 401, 503, 601, 701, 809, 907,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    1009, 1201, 1601, 2003, 2411, 3001, 4001, 5003, 6007, 7001, 8009,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    9001,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    10007, 12007, 16001, 20011, 24001, 30011, 40009, 50021, 60013,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    70001, 80021, 90001,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    100003, 120011, 160001, 200003, 240007, 300007, 400009, 500009,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    600011, 700001, 800011, 900001,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    -1</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;};</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">static</span> int32</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;prime_size(int32 size)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    int32 i;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span> (i = 0; (prime[i] &gt; 0) &amp;&amp; (prime[i] &lt; size); i++);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (prime[i] &lt;= 0) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="err_8h.html#aed4c99044fd3e70b7b33a0298a2279b4">E_WARN</a>(<span class="stringliteral">&quot;Very large hash table requested (%d entries)\n&quot;</span>, size);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        --i;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> (prime[i]);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<a class="code" href="structhash__table__s.html">hash_table_t</a> *</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a56d93e8c03e066b77377ac6eab50cfae">  158</a></span>&#160;<a class="code" href="hash__table_8h.html#a56d93e8c03e066b77377ac6eab50cfae">hash_table_new</a>(int32 size, int32 casearg)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="structhash__table__s.html">hash_table_t</a> *h;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    h = (<a class="code" href="structhash__table__s.html">hash_table_t</a> *) <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(1, <span class="keyword">sizeof</span>(<a class="code" href="structhash__table__s.html">hash_table_t</a>));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a> = prime_size(size + (size &gt;&gt; 1));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    h-&gt;<a class="code" href="structhash__table__s.html#a1d1f5dbf52075c0424596ec492e2614d">nocase</a> = (casearg == HASH_CASE_NO);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    h-&gt;table = (<a class="code" href="structhash__entry__s.html">hash_entry_t</a> *) <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>, <span class="keyword">sizeof</span>(<a class="code" href="structhash__entry__s.html">hash_entry_t</a>));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">/* The above calloc clears h-&gt;table[*].key and .next to NULL, i.e. an empty table */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> h;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * Compute hash value for given key string.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * Somewhat tuned for English text word strings.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">static</span> uint32</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;key2hash(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *cp;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">/*register char c; */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">register</span> int32 s;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">register</span> uint32 hash;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    hash = 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    s = 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structhash__table__s.html#a1d1f5dbf52075c0424596ec492e2614d">nocase</a>) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> (cp = key; *cp; cp++) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            c = *cp;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            c = <a class="code" href="case_8h.html#a3299c549655d5af1fcbc384ee7fd68e3">UPPER_CASE</a>(c);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            hash += c &lt;&lt; s;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            s += 5;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span> (s &gt;= 25)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                s -= 24;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">for</span> (cp = key; *cp; cp++) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            hash += (*cp) &lt;&lt; s;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            s += 5;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> (s &gt;= 25)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                s -= 24;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> (hash % h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;makekey(uint8 * data, <span class="keywordtype">size_t</span> len, <span class="keywordtype">char</span> *key)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">size_t</span> i, j;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (!key)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        key = (<span class="keywordtype">char</span> *) <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(len * 2 + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; len; i++, j += 2) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        key[j] = <span class="charliteral">&#39;A&#39;</span> + (data[i] &amp; 0x000f);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        key[j + 1] = <span class="charliteral">&#39;J&#39;</span> + ((data[i] &gt;&gt; 4) &amp; 0x000f);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    key[j] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> key;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keyword">static</span> int32</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;keycmp_nocase(<a class="code" href="structhash__entry__s.html">hash_entry_t</a> * entry, <span class="keyword">const</span> <span class="keywordtype">char</span> *key)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">char</span> c1, c2;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    int32 i;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    str = entry-&gt;key;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a>; i++) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        c1 = *(str++);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        c1 = <a class="code" href="case_8h.html#a3299c549655d5af1fcbc384ee7fd68e3">UPPER_CASE</a>(c1);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        c2 = *(key++);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        c2 = <a class="code" href="case_8h.html#a3299c549655d5af1fcbc384ee7fd68e3">UPPER_CASE</a>(c2);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> (c1 != c2)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">return</span> (c1 - c2);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">static</span> int32</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;keycmp_case(<a class="code" href="structhash__entry__s.html">hash_entry_t</a> * entry, <span class="keyword">const</span> <span class="keywordtype">char</span> *key)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">char</span> c1, c2;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    int32 i;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    str = entry-&gt;key;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a>; i++) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        c1 = *(str++);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        c2 = *(key++);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (c1 != c2)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> (c1 - c2);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> * Lookup entry with hash-value hash in table h for given key</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * Return value: hash_entry_t for key</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">static</span> <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;lookup(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, uint32 hash, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *entry;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    entry = &amp;(h-&gt;table[hash]);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;key == NULL)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structhash__table__s.html#a1d1f5dbf52075c0424596ec492e2614d">nocase</a>) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">while</span> (entry &amp;&amp; ((entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> != len)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                         || (keycmp_nocase(entry, key) != 0)))</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            entry = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">while</span> (entry &amp;&amp; ((entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> != len)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                         || (keycmp_case(entry, key) != 0)))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            entry = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> entry;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;int32</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a9a1e5ed410eb96f514b00fdce770fbd7">  309</a></span>&#160;<a class="code" href="hash__table_8h.html#a9a1e5ed410eb96f514b00fdce770fbd7">hash_table_lookup</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">void</span> ** val)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *entry;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    hash = key2hash(h, key);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    len = strlen(key);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    entry = lookup(h, hash, key, len);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (entry) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (val)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            *val = entry-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;int32</div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="hash__table_8h.html#acaf27e8e7e336faf6653649937c42ed8">  329</a></span>&#160;<a class="code" href="hash__table_8h.html#acaf27e8e7e336faf6653649937c42ed8">hash_table_lookup_int32</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, int32 *val)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">void</span> *vval;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    int32 rv;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    rv = <a class="code" href="hash__table_8h.html#a9a1e5ed410eb96f514b00fdce770fbd7">hash_table_lookup</a>(h, key, &amp;vval);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (rv != 0)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (val)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        *val = (int32)(<span class="keywordtype">long</span>)vval;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;int32</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a91f5b3924c0e3a50f94c86bb5fd078e8">  344</a></span>&#160;<a class="code" href="hash__table_8h.html#a91f5b3924c0e3a50f94c86bb5fd078e8">hash_table_lookup_bkey</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> ** val)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *entry;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    str = makekey((uint8 *) key, len, NULL);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    hash = key2hash(h, str);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(str);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    entry = lookup(h, hash, key, len);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (entry) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (val)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            *val = entry-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;int32</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="hash__table_8h.html#acc530eda0b105745cf3a47cc3c1148e4">  365</a></span>&#160;<a class="code" href="hash__table_8h.html#acc530eda0b105745cf3a47cc3c1148e4">hash_table_lookup_bkey_int32</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len, int32 *val)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">void</span> *vval;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    int32 rv;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    rv = <a class="code" href="hash__table_8h.html#a91f5b3924c0e3a50f94c86bb5fd078e8">hash_table_lookup_bkey</a>(h, key, len, &amp;vval);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (rv != 0)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (val)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        *val = (int32)(<span class="keywordtype">long</span>)vval;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;enter(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, uint32 hash, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *val, int32 replace)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *cur, *<span class="keyword">new</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> ((cur = lookup(h, hash, key, len)) != NULL) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">void</span> *oldval;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">/* Key already exists. */</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        oldval = cur-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (replace) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="comment">/* Replace the pointer if replacement is requested,</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">             * because this might be a different instance of the same</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">             * string (this verges on magic, sorry) */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            cur-&gt;key = key;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            cur-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a> = val;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">return</span> oldval;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    cur = &amp;(h-&gt;table[hash]);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (cur-&gt;key == NULL) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">/* Empty slot at hashed location; add this entry */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        cur-&gt;key = key;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        cur-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> = len;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        cur-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a> = val;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="comment">/* Added by ARCHAN at 20050515. This allows deletion could work. */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        cur-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> = NULL;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="comment">/* Key collision; create new entry and link to hashed location */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keyword">new</span> = (<a class="code" href="structhash__entry__s.html">hash_entry_t</a> *) <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(1, <span class="keyword">sizeof</span>(<a class="code" href="structhash__entry__s.html">hash_entry_t</a>));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keyword">new</span>-&gt;key = key;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keyword">new</span>-&gt;len = len;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keyword">new</span>-&gt;val = val;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keyword">new</span>-&gt;next = cur-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        cur-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> = <span class="keyword">new</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    ++h-&gt;<a class="code" href="structhash__table__s.html#a8acfb3bc35dd96a9cf6f586dd105d878">inuse</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/* 20050523 Added by ARCHAN  to delete a key from a hash table */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="keyword">delete</span>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, uint32 hash, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *entry, *prev;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">void</span> *val;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    prev = NULL;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    entry = &amp;(h-&gt;table[hash]);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;key == NULL)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (h-&gt;nocase) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">while</span> (entry &amp;&amp; ((entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> != len)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                         || (keycmp_nocase(entry, key) != 0))) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            prev = entry;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            entry = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">while</span> (entry &amp;&amp; ((entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> != len)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                         || (keycmp_case(entry, key) != 0))) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            prev = entry;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            entry = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (entry == NULL)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">/* At this point, entry will be the one required to be deleted, prev</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">       will contain the previous entry</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    val = entry-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (prev == NULL) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">/* That is to say the entry in the hash table (not the chain) matched the key. */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">/* We will then copy the things from the next entry to the hash table */</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        prev = entry;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>) {      <span class="comment">/* There is a next entry, great, copy it. */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            entry = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            prev-&gt;key = entry-&gt;key;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            prev-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> = entry-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            prev-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a> = entry-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            prev-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(entry);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">else</span> {                  <span class="comment">/* There is not a next entry, just set the key to null */</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            prev-&gt;key = NULL;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            prev-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a> = 0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            prev-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> = NULL;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">else</span> {                      <span class="comment">/* This case is simple */</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        prev-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> = entry-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(entry);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/* Do wiring and free the entry */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    --h-&gt;inuse;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="hash__table_8h.html#acab374d21e25009d397642e3465308c7">  490</a></span>&#160;<a class="code" href="hash__table_8h.html#acab374d21e25009d397642e3465308c7">hash_table_empty</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> *h)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;{</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *e, *e2;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    int32 i;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>; i++) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">/* Free collision lists. */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">for</span> (e = h-&gt;table[i].<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>; e; e = e2) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            e2 = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>((<span class="keywordtype">void</span> *) e);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        memset(&amp;h-&gt;table[i], 0, <span class="keyword">sizeof</span>(h-&gt;table[i]));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    h-&gt;<a class="code" href="structhash__table__s.html#a8acfb3bc35dd96a9cf6f586dd105d878">inuse</a> = 0;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="hash__table_8h.html#aebfe63c3869c271b125a8413ee384412">  508</a></span>&#160;<a class="code" href="hash__table_8h.html#aebfe63c3869c271b125a8413ee384412">hash_table_enter</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">void</span> *val)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    hash = key2hash(h, key);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    len = strlen(key);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">return</span> (enter(h, hash, key, len, val, 0));</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="hash__table_8h.html#ae61b28ea189a98ef8f2a3c5521482968">  519</a></span>&#160;<a class="code" href="hash__table_8h.html#ae61b28ea189a98ef8f2a3c5521482968">hash_table_replace</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">void</span> *val)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    hash = key2hash(h, key);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    len = strlen(key);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> (enter(h, hash, key, len, val, 1));</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="hash__table_8h.html#af1d87b1b825c302473f2d7c5a3b88475">  530</a></span>&#160;<a class="code" href="hash__table_8h.html#af1d87b1b825c302473f2d7c5a3b88475">hash_table_delete</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    hash = key2hash(h, key);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    len = strlen(key);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">delete</span>(h, hash, key, len));</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a6f5752fadefe2662adb2c141f1511062">  542</a></span>&#160;<a class="code" href="hash__table_8h.html#a6f5752fadefe2662adb2c141f1511062">hash_table_enter_bkey</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *val)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    str = makekey((uint8 *) key, len, NULL);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    hash = key2hash(h, str);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(str);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">return</span> (enter(h, hash, key, len, val, 0));</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a273237d63833e5625c830f421d9463de">  555</a></span>&#160;<a class="code" href="hash__table_8h.html#a273237d63833e5625c830f421d9463de">hash_table_replace_bkey</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *val)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    str = makekey((uint8 *) key, len, NULL);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    hash = key2hash(h, str);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(str);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> (enter(h, hash, key, len, val, 1));</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="hash__table_8h.html#aa2ab1f5eb2f1b4689645d1e1c19dc887">  568</a></span>&#160;<a class="code" href="hash__table_8h.html#aa2ab1f5eb2f1b4689645d1e1c19dc887">hash_table_delete_bkey</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> len)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    uint32 hash;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">char</span> *str;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    str = makekey((uint8 *) key, len, NULL);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    hash = key2hash(h, str);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(str);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">delete</span>(h, hash, key, len));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a2721f6b601c80ceeeae570589fd12e38">  581</a></span>&#160;<a class="code" href="hash__table_8h.html#a2721f6b601c80ceeeae570589fd12e38">hash_table_display</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, int32 showdisplay)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;{</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *e;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordtype">int</span> i, j;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    j = 0;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    printf(<span class="stringliteral">&quot;Hash with chaining representation of the hash table\n&quot;</span>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>; i++) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        e = &amp;(h-&gt;table[i]);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> (e-&gt;key != NULL) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            printf(<span class="stringliteral">&quot;|key:&quot;</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> (showdisplay)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                printf(<span class="stringliteral">&quot;%s&quot;</span>, e-&gt;key);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                printf(<span class="stringliteral">&quot;%p&quot;</span>, e-&gt;key);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            printf(<span class="stringliteral">&quot;|len:%zd|val=%ld|-&gt;&quot;</span>, e-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a>, (<span class="keywordtype">long</span>)e-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> == NULL) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                printf(<span class="stringliteral">&quot;NULL\n&quot;</span>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            j++;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">for</span> (e = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>; e; e = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                printf(<span class="stringliteral">&quot;|key:&quot;</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <span class="keywordflow">if</span> (showdisplay)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    printf(<span class="stringliteral">&quot;%s&quot;</span>, e-&gt;key);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                printf(<span class="stringliteral">&quot;|len:%zd|val=%ld|-&gt;&quot;</span>, e-&gt;<a class="code" href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">len</a>, (<span class="keywordtype">long</span>)e-&gt;<a class="code" href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">val</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a> == NULL) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    printf(<span class="stringliteral">&quot;NULL\n&quot;</span>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                j++;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    printf(<span class="stringliteral">&quot;The total number of keys =%d\n&quot;</span>, j);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<a class="code" href="structgnode__s.html">glist_t</a></div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a61f59389f05d8871003da4692a9c2acc">  623</a></span>&#160;<a class="code" href="hash__table_8h.html#a61f59389f05d8871003da4692a9c2acc">hash_table_tolist</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h, int32 * count)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="structgnode__s.html">glist_t</a> g;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *e;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    int32 i, j;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    g = NULL;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    j = 0;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>; i++) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        e = &amp;(h-&gt;table[i]);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">if</span> (e-&gt;key != NULL) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            g = <a class="code" href="glist_8h.html#a77a9c20b7df5a289477af405ab778377">glist_add_ptr</a>(g, (<span class="keywordtype">void</span> *) e);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            j++;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">for</span> (e = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>; e; e = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                g = <a class="code" href="glist_8h.html#a77a9c20b7df5a289477af405ab778377">glist_add_ptr</a>(g, (<span class="keywordtype">void</span> *) e);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                j++;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span> (count)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        *count = j;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">return</span> g;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<a class="code" href="structhash__iter__s.html">hash_iter_t</a> *</div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="hash__table_8h.html#aae6e6373d3c371d57861a9a875edb207">  653</a></span>&#160;<a class="code" href="hash__table_8h.html#aae6e6373d3c371d57861a9a875edb207">hash_table_iter</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> *h)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <a class="code" href="structhash__iter__s.html">hash_iter_t</a> *itor;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        itor = <a class="code" href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a>(1, <span class="keyword">sizeof</span>(*itor));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        itor-&gt;<a class="code" href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">ht</a> = h;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="hash__table_8h.html#ad023321efab26a30bd6d855fbdbe08a3">hash_table_iter_next</a>(itor);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<a class="code" href="structhash__iter__s.html">hash_iter_t</a> *</div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="hash__table_8h.html#ad023321efab26a30bd6d855fbdbe08a3">  663</a></span>&#160;<a class="code" href="hash__table_8h.html#ad023321efab26a30bd6d855fbdbe08a3">hash_table_iter_next</a>(<a class="code" href="structhash__iter__s.html">hash_iter_t</a> *itor)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="comment">/* If there is an entry, walk down its list. */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> (itor-&gt;<a class="code" href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">ent</a>)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                itor-&gt;<a class="code" href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">ent</a> = itor-&gt;<a class="code" href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">ent</a>-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">/* If we got to the end of the chain, or we had no entry, scan</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">         * forward in the table to find the next non-empty bucket. */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (itor-&gt;<a class="code" href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">ent</a> == NULL) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">while</span> (itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a> &lt; itor-&gt;<a class="code" href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">ht</a>-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                       &amp;&amp; itor-&gt;<a class="code" href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">ht</a>-&gt;table[itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a>].key == NULL) </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        ++itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <span class="comment">/* If we did not find one then delete the iterator and</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">                 * return NULL. */</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordflow">if</span> (itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a> == itor-&gt;<a class="code" href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">ht</a>-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <a class="code" href="hash__table_8h.html#a7aa43b228d7dc24f5221d281debeb025">hash_table_iter_free</a>(itor);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="comment">/* Otherwise use this next entry. */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                itor-&gt;<a class="code" href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">ent</a> = itor-&gt;<a class="code" href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">ht</a>-&gt;table + itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                <span class="comment">/* Increase idx for the next time around. */</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                ++itor-&gt;<a class="code" href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">idx</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">return</span> itor;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a7aa43b228d7dc24f5221d281debeb025">  689</a></span>&#160;<a class="code" href="hash__table_8h.html#a7aa43b228d7dc24f5221d281debeb025">hash_table_iter_free</a>(<a class="code" href="structhash__iter__s.html">hash_iter_t</a> *itor)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>(itor);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="hash__table_8h.html#a0a588c22946f8cc16328973035ed19e3">  695</a></span>&#160;<a class="code" href="hash__table_8h.html#a0a588c22946f8cc16328973035ed19e3">hash_table_free</a>(<a class="code" href="structhash__table__s.html">hash_table_t</a> * h)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="structhash__entry__s.html">hash_entry_t</a> *e, *e2;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    int32 i;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (h == NULL)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">/* Free additional entries created for key collision cases */</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">size</a>; i++) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">for</span> (e = h-&gt;table[i].<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>; e; e = e2) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            e2 = e-&gt;<a class="code" href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">next</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>((<span class="keywordtype">void</span> *) e);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>((<span class="keywordtype">void</span> *) h-&gt;table);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a>((<span class="keywordtype">void</span> *) h);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="ttc" id="hash__table_8h_html_aa2ab1f5eb2f1b4689645d1e1c19dc887"><div class="ttname"><a href="hash__table_8h.html#aa2ab1f5eb2f1b4689645d1e1c19dc887">hash_table_delete_bkey</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_delete_bkey(hash_table_t *h, const char *key, size_t len)</div><div class="ttdoc">Like hash_table_delete, but with an explicitly specified key length, instead of a NULL-terminated...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00568">hash_table.c:568</a></div></div>
<div class="ttc" id="hash__table_8h_html_acaf27e8e7e336faf6653649937c42ed8"><div class="ttname"><a href="hash__table_8h.html#acaf27e8e7e336faf6653649937c42ed8">hash_table_lookup_int32</a></div><div class="ttdeci">SPHINXBASE_EXPORT int32 hash_table_lookup_int32(hash_table_t *h, const char *key, int32 *val)</div><div class="ttdoc">Look up a 32-bit integer value in a hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00329">hash_table.c:329</a></div></div>
<div class="ttc" id="hash__table_8h_html_a6f5752fadefe2662adb2c141f1511062"><div class="ttname"><a href="hash__table_8h.html#a6f5752fadefe2662adb2c141f1511062">hash_table_enter_bkey</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_enter_bkey(hash_table_t *h, const char *key, size_t len, void *val)</div><div class="ttdoc">Like hash_table_enter, but with an explicitly specified key length, instead of a NULL-terminated, C-style key string. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00542">hash_table.c:542</a></div></div>
<div class="ttc" id="structhash__iter__s_html_a8aa7d6656a165e2e74c42ae4c48ed78f"><div class="ttname"><a href="structhash__iter__s.html#a8aa7d6656a165e2e74c42ae4c48ed78f">hash_iter_s::ent</a></div><div class="ttdeci">hash_entry_t * ent</div><div class="ttdoc">Current entry in that table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00170">hash_table.h:170</a></div></div>
<div class="ttc" id="hash__table_8h_html_a9a1e5ed410eb96f514b00fdce770fbd7"><div class="ttname"><a href="hash__table_8h.html#a9a1e5ed410eb96f514b00fdce770fbd7">hash_table_lookup</a></div><div class="ttdeci">SPHINXBASE_EXPORT int32 hash_table_lookup(hash_table_t *h, const char *key, void **val)</div><div class="ttdoc">Look up a key in a hash table and optionally return the associated value. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00309">hash_table.c:309</a></div></div>
<div class="ttc" id="ckd__alloc_8h_html_aa00ef21903bc4f8a972488417adc8d2e"><div class="ttname"><a href="ckd__alloc_8h.html#aa00ef21903bc4f8a972488417adc8d2e">ckd_calloc</a></div><div class="ttdeci">#define ckd_calloc(n, sz)</div><div class="ttdoc">Macros to simplify the use of above functions. </div><div class="ttdef"><b>Definition:</b> <a href="ckd__alloc_8h_source.html#l00248">ckd_alloc.h:248</a></div></div>
<div class="ttc" id="hash__table_8h_html_a2721f6b601c80ceeeae570589fd12e38"><div class="ttname"><a href="hash__table_8h.html#a2721f6b601c80ceeeae570589fd12e38">hash_table_display</a></div><div class="ttdeci">SPHINXBASE_EXPORT void hash_table_display(hash_table_t *h, int32 showkey)</div><div class="ttdoc">Display a hash-with-chaining representation on the screen. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00581">hash_table.c:581</a></div></div>
<div class="ttc" id="hash__table_8h_html_a91f5b3924c0e3a50f94c86bb5fd078e8"><div class="ttname"><a href="hash__table_8h.html#a91f5b3924c0e3a50f94c86bb5fd078e8">hash_table_lookup_bkey</a></div><div class="ttdeci">SPHINXBASE_EXPORT int32 hash_table_lookup_bkey(hash_table_t *h, const char *key, size_t len, void **val)</div><div class="ttdoc">Like hash_lookup, but with an explicitly specified key length, instead of a NULL-terminated, C-style key string. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00344">hash_table.c:344</a></div></div>
<div class="ttc" id="structhash__table__s_html_a1d1f5dbf52075c0424596ec492e2614d"><div class="ttname"><a href="structhash__table__s.html#a1d1f5dbf52075c0424596ec492e2614d">hash_table_s::nocase</a></div><div class="ttdeci">int32 nocase</div><div class="ttdoc">Number of valid entries in the table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00165">hash_table.h:165</a></div></div>
<div class="ttc" id="hash__table_8h_html_ae61b28ea189a98ef8f2a3c5521482968"><div class="ttname"><a href="hash__table_8h.html#ae61b28ea189a98ef8f2a3c5521482968">hash_table_replace</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_replace(hash_table_t *h, const char *key, void *val)</div><div class="ttdoc">Add a new entry with given key and value to hash table h. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00519">hash_table.c:519</a></div></div>
<div class="ttc" id="ckd__alloc_8h_html"><div class="ttname"><a href="ckd__alloc_8h.html">ckd_alloc.h</a></div><div class="ttdoc">Sphinx&#39;s memory allocation/deallocation routines. </div></div>
<div class="ttc" id="structhash__entry__s_html_aa855ac854b9c36cf23f60d9ac8093e7f"><div class="ttname"><a href="structhash__entry__s.html#aa855ac854b9c36cf23f60d9ac8093e7f">hash_entry_s::next</a></div><div class="ttdeci">struct hash_entry_s * next</div><div class="ttdoc">Value associated with above key. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00156">hash_table.h:156</a></div></div>
<div class="ttc" id="hash__table_8h_html_a7aa43b228d7dc24f5221d281debeb025"><div class="ttname"><a href="hash__table_8h.html#a7aa43b228d7dc24f5221d281debeb025">hash_table_iter_free</a></div><div class="ttdeci">SPHINXBASE_EXPORT void hash_table_iter_free(hash_iter_t *itor)</div><div class="ttdoc">Delete an unfinished iterator. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00689">hash_table.c:689</a></div></div>
<div class="ttc" id="hash__table_8h_html_a61f59389f05d8871003da4692a9c2acc"><div class="ttname"><a href="hash__table_8h.html#a61f59389f05d8871003da4692a9c2acc">hash_table_tolist</a></div><div class="ttdeci">SPHINXBASE_EXPORT glist_t hash_table_tolist(hash_table_t *h, int32 *count)</div><div class="ttdoc">Build a glist of valid hash_entry_t pointers from the given hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00623">hash_table.c:623</a></div></div>
<div class="ttc" id="structhash__table__s_html_a28d173aa0ca9d9af764d4b2dc35dde07"><div class="ttname"><a href="structhash__table__s.html#a28d173aa0ca9d9af764d4b2dc35dde07">hash_table_s::size</a></div><div class="ttdeci">int32 size</div><div class="ttdoc">Primary hash table, excluding entries that collide. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00161">hash_table.h:161</a></div></div>
<div class="ttc" id="structgnode__s_html"><div class="ttname"><a href="structgnode__s.html">gnode_s</a></div><div class="ttdoc">A node in a generic list. </div><div class="ttdef"><b>Definition:</b> <a href="glist_8h_source.html#l00100">glist.h:100</a></div></div>
<div class="ttc" id="hash__table_8h_html_aae6e6373d3c371d57861a9a875edb207"><div class="ttname"><a href="hash__table_8h.html#aae6e6373d3c371d57861a9a875edb207">hash_table_iter</a></div><div class="ttdeci">SPHINXBASE_EXPORT hash_iter_t * hash_table_iter(hash_table_t *h)</div><div class="ttdoc">Start iterating over key-value pairs in a hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00653">hash_table.c:653</a></div></div>
<div class="ttc" id="structhash__table__s_html_a8acfb3bc35dd96a9cf6f586dd105d878"><div class="ttname"><a href="structhash__table__s.html#a8acfb3bc35dd96a9cf6f586dd105d878">hash_table_s::inuse</a></div><div class="ttdeci">int32 inuse</div><div class="ttdoc">Primary hash table size, (is a prime#); NOTE: This is the number of primary entries ALLOCATED...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00164">hash_table.h:164</a></div></div>
<div class="ttc" id="hash__table_8h_html_a56d93e8c03e066b77377ac6eab50cfae"><div class="ttname"><a href="hash__table_8h.html#a56d93e8c03e066b77377ac6eab50cfae">hash_table_new</a></div><div class="ttdeci">SPHINXBASE_EXPORT hash_table_t * hash_table_new(int32 size, int32 casearg)</div><div class="ttdoc">Allocate a new hash table for a given expected size. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00158">hash_table.c:158</a></div></div>
<div class="ttc" id="hash__table_8h_html_acab374d21e25009d397642e3465308c7"><div class="ttname"><a href="hash__table_8h.html#acab374d21e25009d397642e3465308c7">hash_table_empty</a></div><div class="ttdeci">SPHINXBASE_EXPORT void hash_table_empty(hash_table_t *h)</div><div class="ttdoc">Delete all entries from a hash_table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00490">hash_table.c:490</a></div></div>
<div class="ttc" id="ckd__alloc_8h_html_a31c6b405558620ac37599737b5722fbf"><div class="ttname"><a href="ckd__alloc_8h.html#a31c6b405558620ac37599737b5722fbf">ckd_free</a></div><div class="ttdeci">SPHINXBASE_EXPORT void ckd_free(void *ptr)</div><div class="ttdoc">Test and free a 1-D array. </div><div class="ttdef"><b>Definition:</b> <a href="ckd__alloc_8c_source.html#l00244">ckd_alloc.c:244</a></div></div>
<div class="ttc" id="glist_8h_html_a77a9c20b7df5a289477af405ab778377"><div class="ttname"><a href="glist_8h.html#a77a9c20b7df5a289477af405ab778377">glist_add_ptr</a></div><div class="ttdeci">SPHINXBASE_EXPORT glist_t glist_add_ptr(glist_t g, void *ptr)</div><div class="ttdoc">Create and prepend a new list node, with the given user-defined data, at the HEAD of the given generi...</div><div class="ttdef"><b>Definition:</b> <a href="glist_8c_source.html#l00074">glist.c:74</a></div></div>
<div class="ttc" id="case_8h_html_a3299c549655d5af1fcbc384ee7fd68e3"><div class="ttname"><a href="case_8h.html#a3299c549655d5af1fcbc384ee7fd68e3">UPPER_CASE</a></div><div class="ttdeci">#define UPPER_CASE(c)</div><div class="ttdoc">Return upper case form for c. </div><div class="ttdef"><b>Definition:</b> <a href="case_8h_source.html#l00092">case.h:92</a></div></div>
<div class="ttc" id="hash__table_8h_html_a0a588c22946f8cc16328973035ed19e3"><div class="ttname"><a href="hash__table_8h.html#a0a588c22946f8cc16328973035ed19e3">hash_table_free</a></div><div class="ttdeci">SPHINXBASE_EXPORT void hash_table_free(hash_table_t *h)</div><div class="ttdoc">Free the specified hash table; the caller is responsible for freeing the key strings pointed to by th...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00695">hash_table.c:695</a></div></div>
<div class="ttc" id="structhash__entry__s_html"><div class="ttname"><a href="structhash__entry__s.html">hash_entry_s</a></div><div class="ttdoc">A note by ARCHAN at 20050510: Technically what we use is so-called &quot;hash table with buckets&quot; which is...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00149">hash_table.h:149</a></div></div>
<div class="ttc" id="hash__table_8h_html_acc530eda0b105745cf3a47cc3c1148e4"><div class="ttname"><a href="hash__table_8h.html#acc530eda0b105745cf3a47cc3c1148e4">hash_table_lookup_bkey_int32</a></div><div class="ttdeci">SPHINXBASE_EXPORT int32 hash_table_lookup_bkey_int32(hash_table_t *h, const char *key, size_t len, int32 *val)</div><div class="ttdoc">Look up a 32-bit integer value in a hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00365">hash_table.c:365</a></div></div>
<div class="ttc" id="structhash__entry__s_html_af1ec5f16059ced6d9a8ae4d36ca7e2b3"><div class="ttname"><a href="structhash__entry__s.html#af1ec5f16059ced6d9a8ae4d36ca7e2b3">hash_entry_s::len</a></div><div class="ttdeci">size_t len</div><div class="ttdoc">Key string, NULL if this is an empty slot. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00153">hash_table.h:153</a></div></div>
<div class="ttc" id="structhash__iter__s_html_a9cb2842206d721ef3ef9b15c133ba3c9"><div class="ttname"><a href="structhash__iter__s.html#a9cb2842206d721ef3ef9b15c133ba3c9">hash_iter_s::idx</a></div><div class="ttdeci">size_t idx</div><div class="ttdoc">Index of next bucket to search. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00171">hash_table.h:171</a></div></div>
<div class="ttc" id="structhash__iter__s_html_a02844d3426aaa62e41086c98a052ed7d"><div class="ttname"><a href="structhash__iter__s.html#a02844d3426aaa62e41086c98a052ed7d">hash_iter_s::ht</a></div><div class="ttdeci">hash_table_t * ht</div><div class="ttdoc">Hash table we are iterating over. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00169">hash_table.h:169</a></div></div>
<div class="ttc" id="err_8h_html"><div class="ttname"><a href="err_8h.html">err.h</a></div><div class="ttdoc">Implementation of logging routines. </div></div>
<div class="ttc" id="structhash__iter__s_html"><div class="ttname"><a href="structhash__iter__s.html">hash_iter_s</a></div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00168">hash_table.h:168</a></div></div>
<div class="ttc" id="hash__table_8h_html_aebfe63c3869c271b125a8413ee384412"><div class="ttname"><a href="hash__table_8h.html#aebfe63c3869c271b125a8413ee384412">hash_table_enter</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_enter(hash_table_t *h, const char *key, void *val)</div><div class="ttdoc">Try to add a new entry with given key and associated value to hash table h. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00508">hash_table.c:508</a></div></div>
<div class="ttc" id="err_8h_html_aed4c99044fd3e70b7b33a0298a2279b4"><div class="ttname"><a href="err_8h.html#aed4c99044fd3e70b7b33a0298a2279b4">E_WARN</a></div><div class="ttdeci">#define E_WARN(...)</div><div class="ttdoc">Print warning message to error log. </div><div class="ttdef"><b>Definition:</b> <a href="err_8h_source.html#l00109">err.h:109</a></div></div>
<div class="ttc" id="structhash__table__s_html"><div class="ttname"><a href="structhash__table__s.html">hash_table_s</a></div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00159">hash_table.h:159</a></div></div>
<div class="ttc" id="hash__table_8h_html_ad023321efab26a30bd6d855fbdbe08a3"><div class="ttname"><a href="hash__table_8h.html#ad023321efab26a30bd6d855fbdbe08a3">hash_table_iter_next</a></div><div class="ttdeci">SPHINXBASE_EXPORT hash_iter_t * hash_table_iter_next(hash_iter_t *itor)</div><div class="ttdoc">Get the next key-value pair in iteration. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00663">hash_table.c:663</a></div></div>
<div class="ttc" id="hash__table_8h_html_af1d87b1b825c302473f2d7c5a3b88475"><div class="ttname"><a href="hash__table_8h.html#af1d87b1b825c302473f2d7c5a3b88475">hash_table_delete</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_delete(hash_table_t *h, const char *key)</div><div class="ttdoc">Delete an entry with given key and associated value to hash table h. </div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00530">hash_table.c:530</a></div></div>
<div class="ttc" id="hash__table_8h_html"><div class="ttname"><a href="hash__table_8h.html">hash_table.h</a></div><div class="ttdoc">Hash table implementation. </div></div>
<div class="ttc" id="structhash__entry__s_html_a0d57012963084fed93886681108aa636"><div class="ttname"><a href="structhash__entry__s.html#a0d57012963084fed93886681108aa636">hash_entry_s::val</a></div><div class="ttdeci">void * val</div><div class="ttdoc">Key-length; the key string does not have to be a C-style NULL terminated string; it can have arbitrar...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8h_source.html#l00155">hash_table.h:155</a></div></div>
<div class="ttc" id="hash__table_8h_html_a273237d63833e5625c830f421d9463de"><div class="ttname"><a href="hash__table_8h.html#a273237d63833e5625c830f421d9463de">hash_table_replace_bkey</a></div><div class="ttdeci">SPHINXBASE_EXPORT void * hash_table_replace_bkey(hash_table_t *h, const char *key, size_t len, void *val)</div><div class="ttdoc">Like hash_table_replace, but with an explicitly specified key length, instead of a NULL-terminated...</div><div class="ttdef"><b>Definition:</b> <a href="hash__table_8c_source.html#l00555">hash_table.c:555</a></div></div>
<div class="ttc" id="case_8h_html"><div class="ttname"><a href="case_8h.html">case.h</a></div><div class="ttdoc">Locale-independent implementation of case swapping operation. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3b5e6589d8d7d3e6424fe0fcd4bf9c2a.html">libsphinxbase</a></li><li class="navelem"><a class="el" href="dir_dc1f04dceb148346198172cb52290701.html">util</a></li><li class="navelem"><b>hash_table.c</b></li>
    <li class="footer">Generated on Mon Aug 8 2016 22:30:42 for SphinxBase by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
