<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SphinxBase: include/sphinxbase/pio.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SphinxBase
   &#160;<span id="projectnumber">5prealpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pio_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pio.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>file IO related operations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;sphinxbase/sphinxbase_export.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="prim__type_8h_source.html">sphinxbase/prim_type.h</a>&gt;</code><br/>
</div>
<p><a href="pio_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlineiter__t.html">lineiter_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Line iterator for files.  <a href="structlineiter__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a96b37e449c7f8698fcfafac1c46cebb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96b37e449c7f8698fcfafac1c46cebb2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>myfopen</b>(file, mode)&#160;&#160;&#160;<a class="el" href="pio_8h.html#aa22301f25d56be607c9ff45f2c935b14">_myfopen</a>((file),(mode),__FILE__,__LINE__)</td></tr>
<tr class="separator:a96b37e449c7f8698fcfafac1c46cebb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3437935bf372acd79fa68b8f9754fa69"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3437935bf372acd79fa68b8f9754fa69"></a>
typedef struct <a class="el" href="structlineiter__t.html">lineiter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a3437935bf372acd79fa68b8f9754fa69">lineiter_t</a></td></tr>
<tr class="memdesc:a3437935bf372acd79fa68b8f9754fa69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Line iterator for files. <br/></td></tr>
<tr class="separator:a3437935bf372acd79fa68b8f9754fa69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72c3bec19638da72dad3849f75c0cd9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae72c3bec19638da72dad3849f75c0cd9"></a>
typedef struct <a class="el" href="structbit__encode__s.html">bit_encode_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a></td></tr>
<tr class="memdesc:ae72c3bec19638da72dad3849f75c0cd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitstream encoder - for writing compressed files. <br/></td></tr>
<tr class="separator:ae72c3bec19638da72dad3849f75c0cd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa3d71506049eb49cf03eff1b89ef281f"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#aa3d71506049eb49cf03eff1b89ef281f">fopen_comp</a> (const char *file, const char *mode, int32 *ispipe)</td></tr>
<tr class="memdesc:aa3d71506049eb49cf03eff1b89ef281f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like fopen, but use popen and zcat if it is determined that "file" is compressed (i.e., has a .z, .Z, .gz, or .GZ extension).  <a href="#aa3d71506049eb49cf03eff1b89ef281f">More...</a><br/></td></tr>
<tr class="separator:aa3d71506049eb49cf03eff1b89ef281f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87592c3a2d0a00eed9eda014950beb65"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a87592c3a2d0a00eed9eda014950beb65">fclose_comp</a> (FILE *fp, int32 ispipe)</td></tr>
<tr class="memdesc:a87592c3a2d0a00eed9eda014950beb65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a file opened using fopen_comp.  <a href="#a87592c3a2d0a00eed9eda014950beb65">More...</a><br/></td></tr>
<tr class="separator:a87592c3a2d0a00eed9eda014950beb65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addfd26392f118f811584721b8d4854ce"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#addfd26392f118f811584721b8d4854ce">fopen_compchk</a> (const char *file, int32 *ispipe)</td></tr>
<tr class="memdesc:addfd26392f118f811584721b8d4854ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file for reading, but if file not present try to open compressed version (if file is uncompressed, and vice versa).  <a href="#addfd26392f118f811584721b8d4854ce">More...</a><br/></td></tr>
<tr class="separator:addfd26392f118f811584721b8d4854ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22301f25d56be607c9ff45f2c935b14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa22301f25d56be607c9ff45f2c935b14"></a>
SPHINXBASE_EXPORT FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#aa22301f25d56be607c9ff45f2c935b14">_myfopen</a> (const char *file, const char *mode, const char *pgm, int32 line)</td></tr>
<tr class="memdesc:aa22301f25d56be607c9ff45f2c935b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around fopen to check for failure and E_FATAL if failed. <br/></td></tr>
<tr class="separator:aa22301f25d56be607c9ff45f2c935b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601277430d3221bf1906bb879ae26d3e"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a601277430d3221bf1906bb879ae26d3e">fread_retry</a> (void *pointer, int32 size, int32 num_items, FILE *stream)</td></tr>
<tr class="memdesc:a601277430d3221bf1906bb879ae26d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">NFS file reads seem to fail now and then.  <a href="#a601277430d3221bf1906bb879ae26d3e">More...</a><br/></td></tr>
<tr class="separator:a601277430d3221bf1906bb879ae26d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e0daa4f315d01c2e030d3a0abe702c"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a11e0daa4f315d01c2e030d3a0abe702c">fread_line</a> (FILE *stream, size_t *out_len)</td></tr>
<tr class="memdesc:a11e0daa4f315d01c2e030d3a0abe702c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a line of arbitrary length from a file and return it as a newly allocated string.  <a href="#a11e0daa4f315d01c2e030d3a0abe702c">More...</a><br/></td></tr>
<tr class="separator:a11e0daa4f315d01c2e030d3a0abe702c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d0125ab198f02f8bbe543417d99566"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a22d0125ab198f02f8bbe543417d99566"></a>
SPHINXBASE_EXPORT <a class="el" href="structlineiter__t.html">lineiter_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a22d0125ab198f02f8bbe543417d99566">lineiter_start</a> (FILE *fh)</td></tr>
<tr class="memdesc:a22d0125ab198f02f8bbe543417d99566"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start reading lines from a file. <br/></td></tr>
<tr class="separator:a22d0125ab198f02f8bbe543417d99566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ce4c15a564179e9148445fe44ac482"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45ce4c15a564179e9148445fe44ac482"></a>
SPHINXBASE_EXPORT <a class="el" href="structlineiter__t.html">lineiter_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a45ce4c15a564179e9148445fe44ac482">lineiter_start_clean</a> (FILE *fh)</td></tr>
<tr class="memdesc:a45ce4c15a564179e9148445fe44ac482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start reading lines from a file, skip comments and trim lines. <br/></td></tr>
<tr class="separator:a45ce4c15a564179e9148445fe44ac482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8df0b6928746d61b3520555263f71e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff8df0b6928746d61b3520555263f71e"></a>
SPHINXBASE_EXPORT <a class="el" href="structlineiter__t.html">lineiter_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#aff8df0b6928746d61b3520555263f71e">lineiter_next</a> (<a class="el" href="structlineiter__t.html">lineiter_t</a> *li)</td></tr>
<tr class="memdesc:aff8df0b6928746d61b3520555263f71e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move to the next line in the file. <br/></td></tr>
<tr class="separator:aff8df0b6928746d61b3520555263f71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f80e5d4d666426cef229dd41237d9cf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f80e5d4d666426cef229dd41237d9cf"></a>
SPHINXBASE_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a3f80e5d4d666426cef229dd41237d9cf">lineiter_free</a> (<a class="el" href="structlineiter__t.html">lineiter_t</a> *li)</td></tr>
<tr class="memdesc:a3f80e5d4d666426cef229dd41237d9cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop reading lines from a file. <br/></td></tr>
<tr class="separator:a3f80e5d4d666426cef229dd41237d9cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d612f02b2077ffb11cc37c3522b10d7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d612f02b2077ffb11cc37c3522b10d7"></a>
SPHINXBASE_EXPORT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a7d612f02b2077ffb11cc37c3522b10d7">lineiter_lineno</a> (<a class="el" href="structlineiter__t.html">lineiter_t</a> *li)</td></tr>
<tr class="memdesc:a7d612f02b2077ffb11cc37c3522b10d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current line number. <br/></td></tr>
<tr class="separator:a7d612f02b2077ffb11cc37c3522b10d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e4694a4c13c96550f2410f8c63b1f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82e4694a4c13c96550f2410f8c63b1f5"></a>
<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a82e4694a4c13c96550f2410f8c63b1f5">bit_encode_attach</a> (FILE *outfh)</td></tr>
<tr class="memdesc:a82e4694a4c13c96550f2410f8c63b1f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach bitstream encoder to a file. <br/></td></tr>
<tr class="separator:a82e4694a4c13c96550f2410f8c63b1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6d9bb75e08493cde00d396dae088f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada6d9bb75e08493cde00d396dae088f1"></a>
<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#ada6d9bb75e08493cde00d396dae088f1">bit_encode_retain</a> (<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *be)</td></tr>
<tr class="memdesc:ada6d9bb75e08493cde00d396dae088f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retain pointer to a bit encoder. <br/></td></tr>
<tr class="separator:ada6d9bb75e08493cde00d396dae088f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8330637520174419771670ed740c9049"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a8330637520174419771670ed740c9049">bit_encode_free</a> (<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *be)</td></tr>
<tr class="memdesc:a8330637520174419771670ed740c9049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release pointer to a bit encoder.  <a href="#a8330637520174419771670ed740c9049">More...</a><br/></td></tr>
<tr class="separator:a8330637520174419771670ed740c9049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d83bd5850d9ec58175c566d6d48f71"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59d83bd5850d9ec58175c566d6d48f71"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a59d83bd5850d9ec58175c566d6d48f71">bit_encode_write</a> (<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *be, unsigned char const *bits, int nbits)</td></tr>
<tr class="memdesc:a59d83bd5850d9ec58175c566d6d48f71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write bits to encoder. <br/></td></tr>
<tr class="separator:a59d83bd5850d9ec58175c566d6d48f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71dedb663c8e3ae8b91dbfbc95ac420"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae71dedb663c8e3ae8b91dbfbc95ac420"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#ae71dedb663c8e3ae8b91dbfbc95ac420">bit_encode_write_cw</a> (<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *be, uint32 codeword, int nbits)</td></tr>
<tr class="memdesc:ae71dedb663c8e3ae8b91dbfbc95ac420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write lowest-order bits of codeword to encoder. <br/></td></tr>
<tr class="separator:ae71dedb663c8e3ae8b91dbfbc95ac420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e818645e567961225977a1923debc3d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e818645e567961225977a1923debc3d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a3e818645e567961225977a1923debc3d">bit_encode_flush</a> (<a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *be)</td></tr>
<tr class="memdesc:a3e818645e567961225977a1923debc3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush any unwritten bits, zero-padding if necessary. <br/></td></tr>
<tr class="separator:a3e818645e567961225977a1923debc3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba35509687e80ee65ba731c7cfcad9b"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a0ba35509687e80ee65ba731c7cfcad9b">stat_retry</a> (const char *file, struct stat *statbuf)</td></tr>
<tr class="memdesc:a0ba35509687e80ee65ba731c7cfcad9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">There is no bitstream decoder, because a stream abstraction is too slow.  <a href="#a0ba35509687e80ee65ba731c7cfcad9b">More...</a><br/></td></tr>
<tr class="separator:a0ba35509687e80ee65ba731c7cfcad9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289e3a1582ab60563ae0689979992669"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a289e3a1582ab60563ae0689979992669"></a>
SPHINXBASE_EXPORT int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a289e3a1582ab60563ae0689979992669">stat_mtime</a> (const char *file)</td></tr>
<tr class="memdesc:a289e3a1582ab60563ae0689979992669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return time of last modification for the given file, or -1 if stat fails. <br/></td></tr>
<tr class="separator:a289e3a1582ab60563ae0689979992669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6df697b8a08cd4d11fe7b864dcb99012"><td class="memItemLeft" align="right" valign="top">SPHINXBASE_EXPORT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio_8h.html#a6df697b8a08cd4d11fe7b864dcb99012">build_directory</a> (const char *path)</td></tr>
<tr class="memdesc:a6df697b8a08cd4d11fe7b864dcb99012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a directory and all of its parent directories, as needed.  <a href="#a6df697b8a08cd4d11fe7b864dcb99012">More...</a><br/></td></tr>
<tr class="separator:a6df697b8a08cd4d11fe7b864dcb99012"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>file IO related operations. </p>
<p>Custom fopen with error checking is implemented. fopen_comp can open a file with .z, .Z, .gz or .GZ extension</p>
<p>WARNING: Usage of stat_retry will results in 100s of waiting time if the file doesn't exist. </p>

<p>Definition in file <a class="el" href="pio_8h_source.html">pio.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8330637520174419771670ed740c9049"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bit_encode_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pio_8h.html#ae72c3bec19638da72dad3849f75c0cd9">bit_encode_t</a> *&#160;</td>
          <td class="paramname"><em>be</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release pointer to a bit encoder. </p>
<p>Note that this does NOT flush any leftover bits. </p>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00560">560</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="ckd__alloc_8c_source.html#l00244">ckd_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a6df697b8a08cd4d11fe7b864dcb99012"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int build_directory </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a directory and all of its parent directories, as needed. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on failure. </dd></dl>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00621">621</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="ckd__alloc_8c_source.html#l00244">ckd_free()</a>, <a class="el" href="ckd__alloc_8h_source.html#l00264">ckd_salloc</a>, <a class="el" href="err_8h_source.html#l00099">E_ERROR_SYSTEM</a>, and <a class="el" href="filename_8c_source.html#l00068">path2dirname()</a>.</p>

</div>
</div>
<a class="anchor" id="a87592c3a2d0a00eed9eda014950beb65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void fclose_comp </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>ispipe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a file opened using fopen_comp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>In: File pointer to be closed </td></tr>
    <tr><td class="paramname">ispipe</td><td>In: ispipe argument that was returned by the corresponding <a class="el" href="pio_8h.html#aa3d71506049eb49cf03eff1b89ef281f" title="Like fopen, but use popen and zcat if it is determined that &quot;file&quot; is compressed (i.e., has a .z, .Z, .gz, or .GZ extension). ">fopen_comp()</a> call </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00184">184</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa3d71506049eb49cf03eff1b89ef281f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT FILE* fopen_comp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32 *&#160;</td>
          <td class="paramname"><em>ispipe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like fopen, but use popen and zcat if it is determined that "file" is compressed (i.e., has a .z, .Z, .gz, or .GZ extension). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>In: File to be opened </td></tr>
    <tr><td class="paramname">mode</td><td>In: "r" or "w", as with normal fopen </td></tr>
    <tr><td class="paramname">ispipe</td><td>Out: On return *ispipe is TRUE iff file was opened via a pipe </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00107">107</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="ckd__alloc_8c_source.html#l00244">ckd_free()</a>, <a class="el" href="err_8h_source.html#l00104">E_ERROR</a>, <a class="el" href="err_8h_source.html#l00099">E_ERROR_SYSTEM</a>, <a class="el" href="err_8h_source.html#l00081">E_FATAL</a>, and <a class="el" href="strfuncs_8c_source.html#l00070">string_join()</a>.</p>

<p>Referenced by <a class="el" href="pio_8c_source.html#l00201">fopen_compchk()</a>.</p>

</div>
</div>
<a class="anchor" id="addfd26392f118f811584721b8d4854ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT FILE* fopen_compchk </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32 *&#160;</td>
          <td class="paramname"><em>ispipe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file for reading, but if file not present try to open compressed version (if file is uncompressed, and vice versa). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>In: File to be opened </td></tr>
    <tr><td class="paramname">ispipe</td><td>Out: On return *ispipe is TRUE iff file was opened via a pipe </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00201">201</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="ckd__alloc_8h_source.html#l00248">ckd_calloc</a>, <a class="el" href="ckd__alloc_8c_source.html#l00244">ckd_free()</a>, <a class="el" href="err_8h_source.html#l00109">E_WARN</a>, and <a class="el" href="pio_8c_source.html#l00107">fopen_comp()</a>.</p>

</div>
</div>
<a class="anchor" id="a11e0daa4f315d01c2e030d3a0abe702c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT char* fread_line </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>out_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a line of arbitrary length from a file and return it as a newly allocated string. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000029">Deprecated:</a></b></dt><dd>Use line iterators instead.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The file handle to read from. </td></tr>
    <tr><td class="paramname">out_len</td><td>Output: if not NULL, length of the string read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated string containing the line, or NULL on error or EOF. </dd></dl>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00377">377</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="ckd__alloc_8h_source.html#l00253">ckd_malloc</a>, and <a class="el" href="ckd__alloc_8h_source.html#l00258">ckd_realloc</a>.</p>

</div>
</div>
<a class="anchor" id="a601277430d3221bf1906bb879ae26d3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 fread_retry </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>num_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NFS file reads seem to fail now and then. </p>
<p>Use the following functions in place of the regular fread. It retries failed freads several times and quits only if all of them fail. Be aware, however, that even normal failures such as attempting to read beyond EOF will trigger such retries, wasting about a minute in retries. Arguments identical to regular fread. </p>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00408">408</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="err_8h_source.html#l00099">E_ERROR_SYSTEM</a>.</p>

</div>
</div>
<a class="anchor" id="a0ba35509687e80ee65ba731c7cfcad9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 stat_retry </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>There is no bitstream decoder, because a stream abstraction is too slow. </p>
<p>Instead we read blocks of bits and treat them as bitvectors. Like fread_retry, but for stat. Arguments identical to regular stat. Return value: 0 if successful, -1 if stat failed several attempts. </p>

<p>Definition at line <a class="el" href="pio_8c_source.html#l00489">489</a> of file <a class="el" href="pio_8c_source.html">pio.c</a>.</p>

<p>References <a class="el" href="err_8h_source.html#l00099">E_ERROR_SYSTEM</a>.</p>

<p>Referenced by <a class="el" href="pio_8c_source.html#l00519">stat_mtime()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_e3d154c296a8e9be2797a4f81e9375b2.html">sphinxbase</a></li><li class="navelem"><a class="el" href="pio_8h.html">pio.h</a></li>
    <li class="footer">Generated on Mon Aug 8 2016 22:30:43 for SphinxBase by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
